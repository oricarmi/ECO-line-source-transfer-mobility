<!DOCTYPE html>
<html>
<head>
    <title>Analysis Results</title>
    <link rel="stylesheet" href="/static/style.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <h1>{{title}}</h1>
    <h2>{{subtitle}}</h2>
    <h2>{{subtitle2}}</h2>
    {% if error %}
        <p style="color: red;">{{ error }}</p>
    {% elif plots %}
        <div class="plot-container">
        {% for plot_name, plot_div in plots.items() %}
            <div class="plot-item">
                <div>
                    {{ plot_div | safe }}
                </div>
            </div>
        {% endfor %}
        </div>
        
        {% if receiver_tables %}
        <h2>Receiver LSTM Results</h2>
        <div class="receiver-tables-container">
        {% for receiver_name, table_html in receiver_tables.items() %}
            {{ table_html | safe }}
        {% endfor %}
        </div>
        {% endif %}
        
        {% if fds_data %}
        <h2>FDS Data</h2>
        <div class="fds-data">
            <p>Force Density Spectrum loaded with {{ fds_data|length }} frequency bands</p>
        </div>
        {% endif %}
    {% else %}
        <p>No results to display.</p>
    {% endif %}
    <br>
    <div><a href="/">Go Back</a></div>
    
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Ensure plots resize properly in flex containers
        setTimeout(function() {
            var plots = document.querySelectorAll('.js-plotly-plot');
            plots.forEach(function(plot) {
                Plotly.Plots.resize(plot);
            });
        }, 100);
    });
    </script>
</body>
</html>